<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>SENDA - Sistema de Gesti√≥n Integral</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link rel="stylesheet" href="styles.css">
  <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-firestore-compat.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
  <!-- Header -->
  <header class="header">
    <div class="header-content">
      <div class="logo">
        <i class="fas fa-heartbeat"></i>
        <span>SENDA</span>
      </div>
      <div class="header-actions">
        <button class="btn btn-outline" id="find-center">
          <i class="fas fa-map-marker-alt"></i>
          Encontrar Centro
        </button>
        <button class="btn btn-professional" id="login-professional">
          <i class="fas fa-user-md"></i>
          Acceso Profesional
        </button>
      </div>
    </div>
  </header>

  <!-- Main Content -->
  <main class="main-content">
    <div class="hero-card">
      <h1>Programa SENDA</h1>
      <p class="subtitle">Tu recuperaci√≥n comienza aqu√≠</p>
      
      <p class="description">
        Un espacio seguro y confidencial para solicitar ayuda cuando est√©s listo. 
        SENDA busca mitigar el impacto social y sanitario de los consumos de alcohol y otras drogas, 
        mejorando el bienestar y la calidad de vida en las personas y comunidades.
      </p>

      <div class="stats-grid">
        <div class="stat-item">
          <span class="stat-number">1,250+</span>
          <span class="stat-label">Pacientes Atendidos</span>
        </div>
        <div class="stat-item">
          <span class="stat-number">48</span>
          <span class="stat-label">Profesionales Activos</span>
        </div>
        <div class="stat-item">
          <span class="stat-number">95%</span>
          <span class="stat-label">Satisfacci√≥n</span>
        </div>
      </div>

      <div class="btn-group">
        <button class="btn btn-primary" id="register-patient">
          <i class="fas fa-user-plus"></i>
          Solicitar Ayuda
        </button>
        <button class="btn btn-secondary" id="reentry-program">
          <i class="fas fa-redo"></i>
          Reingresar al Programa
        </button>
        <button class="btn btn-outline" id="about-program">
          <i class="fas fa-info-circle"></i>
          Sobre el Programa
        </button>
      </div>

      <div class="emergency-info">
        <p class="emergency-title">¬øNecesitas ayuda inmediata?</p>
        <div class="emergency-numbers">
          <span>üö® Emergencias: 131</span>
          <span>üìû SENDA: 1412 (gratuito)</span>
        </div>
      </div>

      <div class="features">
        <span>‚úì Confidencial</span>
        <span>‚úì Disponible 24/7</span>
        <span>‚úì Sin juicios</span>
      </div>
    </div>
  </main>

  <!-- Footer -->
  <footer class="footer">
    <div class="footer-content">
      <p>Para m√°s informaci√≥n oficial sobre SENDA:</p>
      <a href="https://www.senda.gob.cl" target="_blank" class="footer-link">
        <i class="fas fa-globe"></i>
        Sitio Oficial SENDA
      </a>
      <p style="margin-top: 16px; font-size: 14px; color: var(--gray-400);">
        Sistema interno para profesionales del Programa SENDA
      </p>
    </div>
  </footer>

  <!-- Patient Registration Modal -->
  <div class="modal-overlay" id="patient-modal" style="display: none;">
    <div class="modal large-modal">
      <button class="modal-close" onclick="closeModal('patient-modal')">
        <i class="fas fa-times"></i>
      </button>
      <h2>Solicitud de Ayuda - Confidencial</h2>
      
      <div class="form-progress">
        <div class="progress-bar">
          <div class="progress-fill" id="form-progress"></div>
        </div>
        <span class="progress-text" id="progress-text">Paso 1 de 4</span>
      </div>

      <form id="patient-form" class="multi-step-form">
        <!-- PASO 1: Tipo de solicitud y datos b√°sicos -->
        <div class="form-step active" data-step="1">
          <h3>Tipo de solicitud</h3>
          
          <div class="form-group">
            <label class="form-label">¬øC√≥mo te gustar√≠a proceder? *</label>
            <div class="radio-group">
              <label class="radio-option">
                <input type="radio" name="tipoSolicitud" value="anonimo" required>
                <span class="radio-custom"></span>
                Mantenerme an√≥nimo por ahora
              </label>
              <label class="radio-option">
                <input type="radio" name="tipoSolicitud" value="identificado" required>
                <span class="radio-custom"></span>
                Proporcionar mis datos para contacto directo
              </label>
              <label class="radio-option">
                <input type="radio" name="tipoSolicitud" value="informacion" required>
                <span class="radio-custom"></span>
                Solo necesito informaci√≥n sobre el programa
              </label>
            </div>
          </div>

          <div class="form-row">
            <div class="form-group">
              <label class="form-label">Tu edad *</label>
              <input type="number" class="form-input" id="patient-age" min="12" max="120" required>
            </div>
            <div class="form-group">
              <label class="form-label">Regi√≥n *</label>
              <select class="form-select" id="patient-region" required>
                <option value="">Seleccionar regi√≥n...</option>
                <option value="region-metropolitana">Regi√≥n Metropolitana</option>
                <option value="valparaiso">Valpara√≠so</option>
                <option value="biobio">Biob√≠o</option>
              </select>
            </div>
          </div>

          <div class="form-group">
            <label class="form-label">¬øPara qui√©n solicitas ayuda? *</label>
            <div class="radio-group">
              <label class="radio-option">
                <input type="radio" name="paraMi" value="mi_mismo" required>
                <span class="radio-custom"></span>
                Para m√≠ mismo/a
              </label>
              <label class="radio-option">
                <input type="radio" name="paraMi" value="familiar" required>
                <span class="radio-custom"></span>
                Para un familiar
              </label>
              <label class="radio-option">
                <input type="radio" name="paraMi" value="amigo" required>
                <span class="radio-custom"></span>
                Para un amigo/a
              </label>
            </div>
          </div>
        </div>

        <!-- M√°s steps del formulario aqu√≠... -->
        
        <div class="form-navigation">
          <button type="button" class="btn btn-outline" id="prev-step" style="display: none;">
            <i class="fas fa-arrow-left"></i>
            Anterior
          </button>
          <button type="button" class="btn btn-secondary" id="save-draft">
            <i class="fas fa-save"></i>
            Guardar borrador
          </button>
          <button type="button" class="btn btn-primary" id="next-step">
            Siguiente
            <i class="fas fa-arrow-right"></i>
          </button>
          <button type="submit" class="btn btn-success" id="submit-form" style="display: none;">
            <i class="fas fa-paper-plane"></i>
            Enviar Solicitud
          </button>
        </div>
      </form>
    </div>
  </div>

  <!-- Professional Login Modal -->
  <div class="modal-overlay" id="professional-modal" style="display: none;">
    <div class="modal">
      <button class="modal-close" onclick="closeModal('professional-modal')">
        <i class="fas fa-times"></i>
      </button>
      <h2>Acceso Profesional</h2>
      
      <div class="tabs">
        <div class="tab-list">
          <button class="tab-button active" data-tab="login">Iniciar Sesi√≥n</button>
          <button class="tab-button" data-tab="register">Registrarse</button>
        </div>
      </div>

      <!-- Login Tab -->
      <div class="tab-content active" id="login-tab">
        <form id="login-form">
          <div class="form-group">
            <label class="form-label">Correo Electr√≥nico</label>
            <input type="email" class="form-input" id="login-email" required>
          </div>
          <div class="form-group">
            <label class="form-label">Contrase√±a</label>
            <input type="password" class="form-input" id="login-password" required>
          </div>
          <div class="form-group">
            <label class="checkbox-option">
              <input type="checkbox" id="remember-me">
              <span class="checkbox-custom"></span>
              Recordar sesi√≥n
            </label>
          </div>
          <button type="submit" class="btn btn-primary" style="width: 100%; margin-top: 16px;">
            <i class="fas fa-sign-in-alt"></i>
            Iniciar Sesi√≥n
          </button>
        </form>
      </div>

      <!-- Register Tab -->
      <div class="tab-content" id="register-tab" style="display: none;">
        <form id="register-form">
          <div class="form-group">
            <label class="form-label">Nombre Completo</label>
            <input type="text" class="form-input" id="register-name" required>
          </div>
          <div class="form-group">
            <label class="form-label">Correo Electr√≥nico</label>
            <input type="email" class="form-input" id="register-email" required>
          </div>
          <div class="form-group">
            <label class="form-label">Contrase√±a</label>
            <input type="password" class="form-input" id="register-password" required>
          </div>
          <div class="form-group">
            <label class="form-label">Profesi√≥n</label>
            <select class="form-select" id="register-profession" required>
              <option value="">Seleccionar profesi√≥n...</option>
              <option value="asistente_social">Asistente Social</option>
              <option value="medico">M√©dico</option>
              <option value="psicologo">Psic√≥logo</option>
              <option value="terapeuta">Terapeuta Ocupacional</option>
              <option value="coordinador">Coordinador Regional</option>
              <option value="admin">Administrador</option>
            </select>
          </div>
          <button type="submit" class="btn btn-success" style="width: 100%; margin-top: 16px;">
            <i class="fas fa-user-plus"></i>
            Registrarse
          </button>
        </form>
      </div>
    </div>
  </div>

  <!-- Center Finder Modal -->
  <div class="modal-overlay" id="center-modal" style="display: none;">
    <div class="modal">
      <button class="modal-close" onclick="closeModal('center-modal')">
        <i class="fas fa-times"></i>
      </button>
      <h2>Encontrar Centro de Salud</h2>
      
      <div class="location-input">
        <div class="form-group">
          <label class="form-label">Tu ubicaci√≥n</label>
          <input type="text" class="form-input" id="location-input" placeholder="Ingresa tu direcci√≥n o permite geolocalizaci√≥n">
          <button class="btn btn-outline" id="use-location" style="margin-top: 8px;">
            <i class="fas fa-location-arrow"></i>
            Usar mi ubicaci√≥n
          </button>
        </div>
      </div>

      <div id="centers-list">
        <p>Centros disponibles aparecer√°n aqu√≠...</p>
      </div>
    </div>
  </div>

  <!-- About Modal -->
  <div class="modal-overlay" id="about-modal" style="display: none;">
    <div class="modal">
      <button class="modal-close" onclick="closeModal('about-modal')">
        <i class="fas fa-times"></i>
      </button>
      <h2>Sobre el Programa SENDA</h2>
      
      <div class="about-content">
        <p>El Servicio Nacional para la Prevenci√≥n y Rehabilitaci√≥n del Consumo de Drogas y Alcohol (SENDA) es el organismo del Gobierno de Chile encargado de elaborar las pol√≠ticas de prevenci√≥n del consumo de drogas y alcohol, de tratamiento, rehabilitaci√≥n e integraci√≥n social de las personas afectadas por estas sustancias.</p>
        
        <h3>Nuestros Objetivos</h3>
        <ul>
          <li>Reducir el consumo de drogas y alcohol en la poblaci√≥n</li>
          <li>Mejorar el acceso a tratamiento especializado</li>
          <li>Facilitar la reinserci√≥n social</li>
          <li>Fortalecer la prevenci√≥n en comunidades</li>
        </ul>
        
        <h3>Contacto</h3>
        <p><strong>Fono SENDA:</strong> 1412 (gratuito)</p>
        <p><strong>Web:</strong> www.senda.gob.cl</p>
      </div>
    </div>
  </div>

  <!-- Reentry Modal -->
  <div class="modal-overlay" id="reentry-modal" style="display: none;">
    <div class="modal">
      <button class="modal-close" onclick="closeModal('reentry-modal')">
        <i class="fas fa-times"></i>
      </button>
      <h2>Reingresar al Programa</h2>
      
      <div class="reentry-content">
        <p>Si ya has participado en el programa SENDA anteriormente y necesitas volver a recibir apoyo, puedes solicitar tu reingreso.</p>
        
        <div class="form-group">
          <label class="form-label">N√∫mero de ficha anterior (si lo recuerdas)</label>
          <input type="text" class="form-input" placeholder="Ej: 2023001234">
        </div>
        
        <div class="form-group">
          <label class="form-label">Tel√©fono de contacto</label>
          <input type="tel" class="form-input" placeholder="+56 9 1234 5678">
        </div>
        
        <div class="form-group">
          <label class="form-label">Motivo del reingreso</label>
          <textarea class="form-textarea" placeholder="Describe brevemente por qu√© necesitas volver al programa..."></textarea>
        </div>
        
        <button class="btn btn-primary" style="width: 100%;">
          <i class="fas fa-paper-plane"></i>
          Solicitar Reingreso
        </button>
      </div>
    </div>
  </div>

  <!-- Professional Panel Modal -->
  <div class="modal-overlay" id="panel-modal" style="display: none;">
    <div class="modal professional-panel">
      <!-- Sidebar -->
      <div class="sidebar">
        <div class="sidebar-header">
          <div class="user-info">
            <div class="user-avatar" id="user-avatar">DR</div>
            <div>
              <div id="user-name" style="font-weight: 600;">Dr. Juan P√©rez</div>
              <div id="user-role" style="font-size: 14px; opacity: 0.8;">M√©dico</div>
            </div>
          </div>
        </div>

        <nav class="nav-menu">
          <div class="nav-item active" data-panel="dashboard">
            <i class="fas fa-chart-line"></i>
            Dashboard
          </div>
          <div class="nav-item" data-panel="requests">
            <i class="fas fa-inbox"></i>
            Solicitudes
            <span class="badge" id="requests-badge">0</span>
          </div>
          <div class="nav-item" data-panel="patients">
            <i class="fas fa-users"></i>
            Pacientes
          </div>
          <div class="nav-item" data-panel="calendar">
            <i class="fas fa-calendar-alt"></i>
            Agenda
          </div>
          <div class="nav-item" data-panel="followups">
            <i class="fas fa-clipboard-list"></i>
            Seguimientos
          </div>
          <div class="nav-item" data-panel="reports">
            <i class="fas fa-file-medical-alt"></i>
            Reportes
          </div>
        </nav>

        <div class="sidebar-footer">
          <button class="logout-btn" id="logout-btn">
            <i class="fas fa-sign-out-alt"></i>
            Cerrar Sesi√≥n
          </button>
        </div>
      </div>

      <!-- Main Panel -->
      <div class="main-panel">
        <!-- Dashboard Panel -->
        <div class="panel-content active" id="dashboard-panel">
          <div class="panel-header">
            <h1 class="panel-title">Dashboard</h1>
            <p class="panel-subtitle">Resumen general de actividades</p>
          </div>

          <div class="metrics-grid">
            <div class="metric-card">
              <div class="metric-header">
                <h3>Pacientes Activos</h3>
                <i class="fas fa-users metric-icon"></i>
              </div>
              <div class="metric-value" id="total-patients">0</div>
              <div class="metric-change positive">
                <i class="fas fa-arrow-up"></i> +12% desde el mes pasado
              </div>
            </div>

            <div class="metric-card">
              <div class="metric-header">
                <h3>Citas Hoy</h3>
                <i class="fas fa-calendar metric-icon"></i>
              </div>
              <div class="metric-value" id="today-appointments">0</div>
              <div class="metric-detail">
                Pr√≥xima cita: <span id="next-appointment">--:--</span>
              </div>
            </div>
          </div>

          <div class="dashboard-charts">
            <div class="chart-container">
              <h3>Casos por Prioridad</h3>
              <canvas id="priority-chart"></canvas>
            </div>
          </div>
        </div>

        <!-- Otros paneles -->
        <div class="panel-content" id="requests-panel" style="display: none;">
          <div class="panel-header">
            <h1 class="panel-title">Gesti√≥n de Solicitudes</h1>
            <p class="panel-subtitle">Revisa y gestiona las solicitudes pendientes</p>
          </div>
          <div id="requests-list">
            <!-- Las solicitudes se cargar√°n aqu√≠ din√°micamente -->
          </div>
        </div>

        <div class="panel-content" id="patients-panel" style="display: none;">
          <div class="panel-header">
            <h1 class="panel-title">Gesti√≥n de Pacientes</h1>
            <p class="panel-subtitle">Busca y gestiona fichas cl√≠nicas</p>
          </div>
          <div id="patients-list">
            <!-- Los pacientes se cargar√°n aqu√≠ din√°micamente -->
          </div>
        </div>

        <div class="panel-content" id="calendar-panel" style="display: none;">
          <div class="panel-header">
            <h1 class="panel-title">Gesti√≥n de Agenda</h1>
            <p class="panel-subtitle">Programa y gestiona citas con profesionales</p>
          </div>
          <div id="calendar-content">
            <!-- El calendario se cargar√° aqu√≠ din√°micamente -->
          </div>
        </div>

        <div class="panel-content" id="followups-panel" style="display: none;">
          <div class="panel-header">
            <h1 class="panel-title">Seguimientos Cl√≠nicos</h1>
            <p class="panel-subtitle">Gestiona el historial cl√≠nico de tus pacientes</p>
          </div>
          <div id="followups-content">
            <!-- Los seguimientos se cargar√°n aqu√≠ din√°micamente -->
          </div>
        </div>

        <div class="panel-content" id="reports-panel" style="display: none;">
          <div class="panel-header">
            <h1 class="panel-title">Generaci√≥n de Reportes</h1>
            <p class="panel-subtitle">Genera reportes cl√≠nicos y estad√≠sticos del programa</p>
          </div>
          <div id="reports-content">
            <!-- Los reportes se cargar√°n aqu√≠ din√°micamente -->
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Notification Container -->
  <div id="notifications"></div>

  <!-- Loading Overlay -->
  <div id="loading-overlay" class="loading-overlay" style="display: none;">
    <div class="loading-spinner">
      <div class="spinner"></div>
      <p>Cargando...</p>
    </div>
  </div>

  <script src="app.js"></script>
</body>
</html>
