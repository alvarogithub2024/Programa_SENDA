<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SENDA Puente Alto - Sistema de Gestión</title>
<link rel="stylesheet" href="styles.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>s.js"></script>
  <script src="configuracion/firebase.js"></script>
  <script src="utilidades/notificaciones.js"></script>
  <script src="utilidades/modales.js"></script>
  <script src="utilidades/validaciones.js"></script>
  <script src="formularios/formulario-paciente.js"></script>
  <script src="formularios/formulario-reingreso.js"></script>
  <script src="formularios/autoguardado.js"></script>
  <script src="navegacion/tabs.js"></script>
  <script src="navegacion/eventos.js"></script>
  <script src="navegacion/shortcuts.js"></script>
  <script src="solicitudes/gestor-solicitudes.js"></script>
  <script src="solicitudes/filtros.js"></script>
  <script src="solicitudes/respuestas.js"></script>
  <script src="calendario/agenda.js"></script>
  <script src="calendario/citas.js"></script>
  <script src="calendario/horarios.js"></script>
  <script src="pacientes/gestor-pacientes.js"></script>
  <script src="pacientes/busqueda.js"></script>
  <script src="pacientes/fichas.js"></script>
  <script src="seguimiento/timeline.js"></script>
  <script src="seguimiento/atenciones.js"></script>
  <script src="seguimiento/citas-proximas.js"></script>
  <script src="autenticacion/registro.js"></script>
  <script src="autenticacion/login.js"></script>
  <script src="autenticacion/sesion.js"></script>
  <script src="autenticacion/cita-profesionales.js"></script>
  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
  <link rel="icon" type="image/x-icon" href="data:image/x-icon;base64,">
  <script src="main.js"></script>
</head>
<body>
  <header class="header">
    <div class="header-content">
      <div class="logo">
        <i class="fas fa-heartbeat"></i>
        <span>SENDA Puente Alto</span>
      </div>
      <div class="header-actions">
        <button class="btn btn-professional" id="login-professional">
          <i class="fas fa-user-md"></i>
          Acceso Profesionales
        </button>
      </div>
    </div>
  </header>
  <div class="professional-header" id="professional-header" style="display: none;">
    <div class="header-content">
      <div class="professional-info">
        <div class="professional-avatar">PA</div>
        <div class="professional-details">
          <h3 id="professional-name">Profesional SENDA</h3>
          <p id="professional-profession">Cargando...</p>
          <small id="professional-cesfam">CESFAM</small>
        </div>
      </div>
      <div class="professional-actions">
        <button class="btn btn-danger btn-sm" id="logout-professional">
          <i class="fas fa-sign-out-alt"></i>
          Cerrar Sesión
        </button>
      </div>
    </div>
  </div>
  <main class="main-content">
    <!-- ... tu contenido principal ... -->
    <!-- ... aquí va tu hero-card, stats, info, tabs, secciones, etc ... -->
  </main>

  <!-- MODALES DE SOLICITUDES DE INGRESO (fuera del footer, al final del body) -->
  <!-- Modal Ver Detalles -->
  <div id="modal-detalle" class="modal-overlay" style="display:none;">
    <div class="modal-content">
      <span class="close" onclick="closeModal('modal-detalle')">&times;</span>
      <h3>Detalles del paciente</h3>
      <p><b>Nombre:</b> <span id="modal-detalle-nombre"></span></p>
      <p><b>RUT:</b> <span id="modal-detalle-rut"></span></p>
      <p><b>Teléfono:</b> <span id="modal-detalle-telefono"></span></p>
      <p><b>Email:</b> <span id="modal-detalle-email"></span></p>
      <p><b>Motivo de atención:</b> <span id="modal-detalle-motivo"></span></p>
      <p><b>CESFAM:</b> <span id="modal-detalle-cesfam"></span></p>
      <p><b>Prioridad:</b> <span id="modal-detalle-prioridad"></span></p>
      <p><b>Estado:</b> <span id="modal-detalle-estado"></span></p>
      <p><b>Fecha:</b> <span id="modal-detalle-fecha"></span></p>
      <p><b>Sustancias:</b> <span id="modal-detalle-sustancias"></span></p>
    </div>
  </div>

  <!-- Modal Editar -->
  <div id="modal-editar" class="modal-overlay" style="display:none;">
    <div class="modal-content">
      <span class="close" onclick="closeModal('modal-editar')">&times;</span>
      <h3>Editar solicitud</h3>
      <input type="hidden" id="modal-editar-id">
      <label>Nombre:</label><input type="text" id="modal-editar-nombre">
      <label>RUT:</label><input type="text" id="modal-editar-rut">
      <label>Teléfono:</label><input type="text" id="modal-editar-telefono">
      <label>Cita agendada:</label><input type="text" id="modal-editar-cita">
      <button onclick="guardarEdicionSolicitud()" class="btn btn-success">Guardar cambios</button>
    </div>
  </div>

  <!-- Modal Agendar Cita -->
  <div id="modal-cita" class="modal-overlay" style="display:none;">
    <div class="modal-content">
      <span class="close" onclick="closeModal('modal-cita')">&times;</span>
      <h3>Agendar cita</h3>
      <input type="hidden" id="modal-cita-id">
      <p><b>Nombre:</b> <span id="modal-cita-nombre"></span></p>
      <p><b>RUT:</b> <span id="modal-cita-rut"></span></p>
      <label>Fecha:</label> <input type="date" id="modal-cita-fecha">
      <label>Hora:</label> <input type="time" id="modal-cita-hora">
      <button onclick="guardarCita()" class="btn btn-success">Agendar</button>
    </div>
  </div>

  <!-- Modal Responder -->
  <div id="modal-responder" class="modal-overlay" style="display:none;">
    <div class="modal-content">
      <span class="close" onclick="closeModal('modal-responder')">&times;</span>
      <h3>Responder solicitud de información</h3>
      <input type="hidden" id="modal-responder-email">
      <input type="hidden" id="modal-responder-id">
      <p><b>Para:</b> <span id="modal-responder-nombre"></span></p>
      <label>Asunto:</label>
      <input type="text" id="modal-responder-asunto" value="Respuesta a su solicitud de información">
      <label>Mensaje:</label>
      <textarea id="modal-responder-mensaje" rows="5"></textarea>
      <button onclick="enviarCorreoSenda()" class="btn btn-success">Enviar correo</button>
    </div>
  </div>

  <!-- ... otros modales ... -->

  <footer class="footer">
    <div class="footer-content">
      <p>&copy; 2024 SENDA Puente Alto. Todos los derechos reservados.</p>
      <p>Desarrollado para el bienestar de nuestra comunidad</p>
      <a href="https://www.senda.gob.cl" target="_blank" class="footer-link"><i class="fas fa-external-link-alt"></i> Sitio oficial SENDA</a>
    </div>
  </footer>

  <!-- ... scripts opcionales ... -->
</body>
</html>
